<canvas width="1200" height="600">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>coisa pra frente</title>
    </head>

    <body>

        <script>
            var tela = document.querySelector('canvas');
            var pincel = tela.getContext('2d')
            pincel.fillStyle = 'black'
            pincel.fillRect(0, 0, 1200, 600)

            function limpaTela() {

                pincel.fillStyle = 'black'
                pincel.fillRect(0, 0, 1200, 600)

            }

            var distanciaLinha = 40
            var comprimentoLinha = 200
            var espaçamento = 100
            var xe = 20
            var ye = 80


            function desenhaEstrada() {

                pincel.fillStyle = 'yellow'
                pincel.fillRect(xe, ye, comprimentoLinha, 10)
                pincel.fillRect(xe + comprimentoLinha + distanciaLinha, ye, comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 2) + (distanciaLinha * 2), ye, comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 3) + (distanciaLinha * 3), ye, comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 4) + (distanciaLinha * 4), ye, comprimentoLinha, 10)

                pincel.fillRect(xe, ye + espaçamento, comprimentoLinha, 10)
                pincel.fillRect(xe + comprimentoLinha + distanciaLinha, ye + espaçamento, comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 2) + (distanciaLinha * 2), ye + espaçamento, comprimentoLinha,
                    10)
                pincel.fillRect(xe + (comprimentoLinha * 3) + (distanciaLinha * 3), ye + espaçamento, comprimentoLinha,
                    10)
                pincel.fillRect(xe + (comprimentoLinha * 4) + (distanciaLinha * 4), ye + espaçamento, comprimentoLinha,
                    10)

                pincel.fillRect(xe, ye + (espaçamento * 2), comprimentoLinha, 10)
                pincel.fillRect(xe + comprimentoLinha + distanciaLinha, ye + (espaçamento * 2), comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 2) + (distanciaLinha * 2), ye + (espaçamento * 2),
                    comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 3) + (distanciaLinha * 3), ye + (espaçamento * 2),
                    comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 4) + (distanciaLinha * 4), ye + (espaçamento * 2),
                    comprimentoLinha, 10)

                pincel.fillRect(xe, ye + (espaçamento * 3), comprimentoLinha, 10)
                pincel.fillRect(xe + comprimentoLinha + distanciaLinha, ye + (espaçamento * 3), comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 2) + (distanciaLinha * 2), ye + (espaçamento * 3),
                    comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 3) + (distanciaLinha * 3), ye + (espaçamento * 3),
                    comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 4) + (distanciaLinha * 4), ye + (espaçamento * 3),
                    comprimentoLinha, 10)

                pincel.fillRect(xe, ye + (espaçamento * 4), comprimentoLinha, 10)
                pincel.fillRect(xe + comprimentoLinha + distanciaLinha, ye + (espaçamento * 4), comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 2) + (distanciaLinha * 2), ye + (espaçamento * 4),
                    comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 3) + (distanciaLinha * 3), ye + (espaçamento * 4),
                    comprimentoLinha, 10)
                pincel.fillRect(xe + (comprimentoLinha * 4) + (distanciaLinha * 4), ye + (espaçamento * 4),
                    comprimentoLinha, 10)

                pincel.fillStyle = 'grey'
                pincel.fillRect(0, 0, 1200, 50)
                pincel.fillRect(0, 550, 1200, 50)

            }

            desenhaEstrada(20, 80);

            function desenhaBolinha(x, y, raio, cor) {
                pincel.fillStyle = cor;
                pincel.beginPath();
                pincel.arc(x, y, raio, 0, 2 * 3.14);
                pincel.fill();
            }

            var xCVe = 1200
            var xCAz = 1200
            var xCLa = 1200
            var xCRo = 1200

            var yCVe = 120
            var yCAz = 230
            var yCLa = 330
            var yCRo = 430

            function fazRoda(x, y) {
                desenhaBolinha(x, y + 35, 8, 'black')
                desenhaBolinha(x, y + 35, 7, 'white')
                desenhaBolinha(x, y + 35, 3, 'black')
                desenhaBolinha(x + 50, y + 35, 8, 'black')
                desenhaBolinha(x + 50, y + 35, 7, 'white')
                desenhaBolinha(x + 50, y + 35, 3, 'black')
            }

            var margemHitBox = 10
            var alturaCarro = 35

            function desenhaCarro(x, y, cor) {

                pincel.fillStyle = 'black'
                pincel.fillRect(x - margemHitBox, y - margemHitBox, 40 + margemHitBox, alturaCarro + margemHitBox)


                pincel.fillStyle = cor;
                pincel.fillRect(x, y, 50, 35)
                fazRoda(x, y);

                pincel.fillStyle = 'cyan'
                pincel.fillRect(x + 5, y + 5, 20, 15)



            }

            var velVe = 4
            var velAz = 3
            var velLa = 2
            var velRo = 1

            function todosCarros() {
                desenhaCarro(xCVe, yCVe, 'red');

                xCVe = xCVe - velVe

                if (xCVe < 0) {

                    xCVe = 1200
                }

                desenhaCarro(xCAz, yCAz, 'blue');
                xCAz = xCAz - velAz
                if (xCAz < 0) {

                    xCAz = 1200
                }
                desenhaCarro(xCLa, yCLa, 'orange');
                xCLa = xCLa - velLa
                if (xCLa < 0) {

                    xCLa = 1200
                }
                desenhaCarro(xCRo, yCRo, 'purple');
                xCRo = xCRo - velRo
                if (xCRo < 0) {

                    xCRo = 1200
                }


            }
            todosCarros()


            var posiçãoXPlayer = 600
            var posiçãoYPlayer = 580
            var larguraPlayer = 30

            function desenhaPlayer() {



                pincel.fillStyle = 'white';
                pincel.beginPath();
                pincel.arc(posiçãoXPlayer, posiçãoYPlayer, 19, 0, 2 * 3.14);
                pincel.fill();



                if (posiçãoXPlayer + larguraPlayer > xCVe - margemHitBox &&
                    posiçãoXPlayer < xCVe + 40 + margemHitBox &&
                    posiçãoYPlayer + larguraPlayer > yCVe &&
                    posiçãoYPlayer - larguraPlayer < yCVe + 40 + margemHitBox) {

                    posiçãoXPlayer = 600
                    posiçãoYPlayer = 580
                    colidiu = true

                }

                if (posiçãoXPlayer + larguraPlayer > xCAz - margemHitBox &&
                    posiçãoXPlayer < xCAz + 40 + margemHitBox &&
                    posiçãoYPlayer + larguraPlayer > yCAz &&
                    posiçãoYPlayer - larguraPlayer < yCAz + 40 + margemHitBox

                ) {

                    posiçãoXPlayer = 600
                    posiçãoYPlayer = 580
                    colidiu = true
                }

                if (posiçãoXPlayer + larguraPlayer > xCLa - margemHitBox &&
                    posiçãoXPlayer < xCLa + 40 + margemHitBox &&
                    posiçãoYPlayer + larguraPlayer > yCLa &&
                    posiçãoYPlayer - larguraPlayer < yCLa + 40 + margemHitBox

                ) {

                    posiçãoXPlayer = 600
                    posiçãoYPlayer = 580
                    colidiu = true
                }

                if (posiçãoXPlayer + larguraPlayer > xCRo - margemHitBox &&
                    posiçãoXPlayer < xCRo + 40 + margemHitBox &&
                    posiçãoYPlayer + larguraPlayer > yCRo &&
                    posiçãoYPlayer - larguraPlayer < yCRo + 40 + margemHitBox

                ) {

                    posiçãoXPlayer = 600
                    posiçãoYPlayer = 580
                    colidiu = true
                }
                    // fazendo pontos
                if (posiçãoYPlayer < 20) {
                    sequencia = sequencia + 1
                    if (sequencia > recorde){
                    recorde = recorde +1
                    }
                    posiçãoYPlayer = 580
                }


            }

            function sobePlayer() {

                posiçãoYPlayer = posiçãoYPlayer - 30
            }

            function descePlayer() {

                posiçãoYPlayer = posiçãoYPlayer + 30
            }

            function direitaPlayer() {

                posiçãoXPlayer = posiçãoXPlayer + 30
            }

            function esquerdaPlayer() {

                posiçãoXPlayer = posiçãoXPlayer - 30
            }

            var sequencia = 0
            var recorde = 0
            var colidiu = false

            function resetPontos() {

                if (colidiu) {

                    sequencia = 0
                    colidiu = false

                
                }


            }
            
            function pontuação() {


                pincel.fillStyle = 'orange'
                pincel.fillRect(271, 13, 20, 20)
                pincel.fillRect(293, 13, 20, 20)
                pincel.strokeStyle = 'white'
                pincel.strokeRect(271, 13, 20, 20)
                pincel.strokeRect(293, 13, 20, 20)
                pincel.fillStyle = 'white'
                pincel.fillText(sequencia, 278, 26)
                pincel.fillText(recorde, 300, 26)
                resetPontos()
            }




            document.onkeydown = (e) => {
                e = e || window.event;
                if (e.keyCode === 38 && posiçãoYPlayer > 10) {
                    sobePlayer()
                } else if (e.keyCode === 40 && posiçãoYPlayer < 600) {
                    descePlayer()
                } else if (e.keyCode === 37 && posiçãoXPlayer > 0) {
                    esquerdaPlayer()
                } else if (e.keyCode === 39 && posiçãoXPlayer < 1140) {
                    direitaPlayer()
                }
            }

            function animaTudo() {

                limpaTela()
                desenhaEstrada()

                desenhaPlayer()
                todosCarros()
                pontuação()

            }




            function localizaMouse(evento) {
                var x = evento.pageX - tela.offsetLeft;
                y = evento.pageY - tela.offsetTop;

                console.log(evento.pageX)
                console.log(evento.pageY)
            }

            tela.onclick = localizaMouse

            setInterval(animaTudo, 10)
        </script>
    </body>